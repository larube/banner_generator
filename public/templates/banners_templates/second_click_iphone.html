<!doctype >
<html>
	<head>
		<meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
		<style type="text/css">
		/* ======== DEFAULT CSS ======== */
		body{margin:0;background:transparent;overflow:hidden}img{max-width:100%;display:block;vertical-align:middle;image-rendering:pixelated}a{-webkit-tap-highlight-color:rgba(200,0,0,0.0)}#nb-close{display:block;width:12%;height:10%;position:absolute;top:0;right:1%;border:0;background:rgba(0,0,0,0)}

		/* ======== TRIGGER SECTION CSS ======== */
		#container{
			-webkit-transform-style: preserve-3d;
			position:relative;
			-webkit-perspective: 1200px;
		}
		#first-stage{
			overflow: hidden;
			position:absolute;
            		width:100%;
            		top: 0;
            		left:0;
            		z-index: 10;
            		-webkit-transform-origin: {{transform-origin-stageOne}};
        			-webkit-animation-duration : {{animation-duration-stageOne}};
        			-webkit-animation-timing-function: {{animation-timing-stageOne}};
        			-webkit-animation-fill-mode : both;
		}
		#second-stage{
			overflow: hidden;
			width:100%;
			position: absolute;
			display: none;
			top:0;
			left:0;
			z-index: -50;
			-webkit-transform-origin: {{transform-origin-stageTwo}};
         			-webkit-animation-duration : {{animation-duration-stageTwo}};
        			-webkit-animation-timing-function: {{animation-timing-stageTwo}};
         			-webkit-animation-delay:{{animation-delay-stageTwo}};
         			-webkit-animation-fill-mode : both;
		}

		#clickLink{
			display: block;
		}
		
		#app-background{
			width:100%;
		}

		#background{
			width: 100%;
		}

		@-webkit-keyframes rotateCubeRightOut {
			50% { -webkit-animation-timing-function: ease-out; -webkit-transform: translateX(50%) translateZ(-200px) rotateY(45deg); }
			100% { opacity: 0; -webkit-transform: translateX(100%) rotateY(90deg); }
		}

		@-webkit-keyframes rotateCubeRightIn {
			0% { opacity: 0; -webkit-transform: translateX(-100%) rotateY(-90deg); }
			50% { -webkit-animation-timing-function: ease-out; -webkit-transform: translateX(-50%) translateZ(-200px) rotateY(-45deg); }
		}

		@-webkit-keyframes rotateCubeTopOut {
			50% { -webkit-animation-timing-function: ease-out; -webkit-transform: translateY(-50%) translateZ(-130px) rotateX(45deg); }
			100% { opacity: .3; -webkit-transform: translateY(-100%) rotateX(90deg); }
		}

		@-webkit-keyframes rotateCubeTopIn {
			0% { opacity: .3; -webkit-transform: translateY(100%) rotateX(-90deg); }
			50% { -webkit-animation-timing-function: ease-out; -webkit-transform: translateY(50%) translateZ(-130px) rotateX(-45deg); }
		}

		@-webkit-keyframes flipOutRight {
 			   to { -webkit-transform: translateZ(-1000px) rotateY(90deg); opacity: 0.2; }
		}

		@-webkit-keyframes flipInRight {
  			from { -webkit-transform: translateZ(-1000px) rotateY(-90deg); opacity: 0.2; }
		}

		@-webkit-keyframes flipOutTop {
			to { -webkit-transform: translateZ(-1000px) rotateX(90deg); opacity: 0; }
		}

		@-webkit-keyframes flipInBottom {
			from { -webkit-transform: translateZ(-1000px) rotateX(-90deg); opacity: 0; }
		}

		@-webkit-keyframes rotateFoldTop {
			70%{opacity:0.6;}
			100% { opacity: 0; -webkit-transform: translateY(-100%) rotateX(90deg); }
		}

		@-webkit-keyframes moveFromBottomFade {
			from { opacity: 0.3; -webkit-transform: translateY(100%); }
		}

		@-webkit-keyframes rotateFoldLeft {
			to { opacity: 0; -webkit-transform: translateX(-100%) rotateY(-90deg); }
		}

		@-webkit-keyframes moveFromRightFade {
			from { opacity: 0.3; -webkit-transform: translateX(100%); }
		}

		@-webkit-keyframes rotatePushLeft {
			to { opacity: 0; -webkit-transform: rotateY(90deg); }
		}

		@-webkit-keyframes rotatePullRight {
			from { opacity: 0; -webkit-transform: rotateY(-90deg); }
		}

		@-webkit-keyframes rotatePushBottom {
			to { opacity: 0; -webkit-transform: rotateX(93deg); }
		}

		@-webkit-keyframes rotatePullTop {
			from { opacity: 0; -webkit-transform: rotateX(-90deg); }
		}

		</style>
	</head>
	<body>
		<div id="container">
				<div id="first-stage">
					<img class="bg" src="{{ pathToCustomImage}}" id="background">
				</div>
				<div id="second-stage">
					<a href="{{redirectLink}}" id="clickLink" target="_blank">
	            				<div style="position:relative;">
	            					<img id="app-background"  src="{{pathToBanner}}">
	            				</div>
            				</a>
            	</div>
		<script type="text/javascript">
			{{ communicateScript }}
		</script>

		<script>
			var 	firstStage 	= document.getElementById('first-stage'),
				secondStage 	= document.getElementById('second-stage');

				firstStage.addEventListener('click', function(){
					var	img 		= document.createElement('img');
					img.src 		= "{{clickPixelLink }}";
					img.style.width 	= 0;
					img.style.height 	= 0;
					img.style.border 	= 'none';
					document.body.appendChild(img);
					firstStage.style.webkitAnimationName = '{{animation-stageOne}}';
					secondStage.style.webkitAnimationName = '{{animation-stageTwo}}';
					secondStage.style.display = 'block';
				});

		</script>
	</body>
</html>