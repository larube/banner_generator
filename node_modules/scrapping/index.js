var ScrappingApplication =function(url, store, cb){

	this._url 	= url;
	this._cb 	=cb;
	this._store 	= store;
	this._fs 	=require('fs');
	self 		=this;

	this.init();
}

ScrappingApplication.prototype.init = function(){

	//Check si le stotre pass√© en param existe
	this._fs.readdir(__dirname+'/lib', function(err, files){
		if(files.indexOf(self._store) ==-1){
			 throw new Error('Store does not exist');
		}
		
		self._storeClass 	= require('./lib/'+self._store);
		self.dataStore 	= new self._storeClass(self._url).getInformationStore(self.sendResults);
	});
}

ScrappingApplication.prototype.sendResults = function(res){
	self._cb(res);
}



module.exports= ScrappingApplication;
