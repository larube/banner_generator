var Android = function(url){
	this._url 		= url;
	this._jsdom		= require('jsdom');
	this._htmlSchema 	= require('./config/htmlSchema.json');
	this._dataStore 	={};
}

Android.prototype.getInformationStore = function(cb){
	
	var self =this;

	this._jsdom.env({
		url : this._url,
		scripts: ["http://code.jquery.com/jquery.js"],
		done: function (errors, window) {
			var $ = window.$;
			for(entry in self._htmlSchema){
				switch 	(self._htmlSchema[entry].attribute) {
					case "text":
					self._dataStore[entry] = $(self._htmlSchema[entry].elem).text();
					break;

					case "content":
					self._dataStore[entry] = $(self._htmlSchema[entry].elem).attr('content');
					break;

					case "src":
					self._dataStore[entry] = $(self._htmlSchema[entry].elem).attr('src');
					break;

					default:
					self._dataStore[entry] = $(self._htmlSchema[entry].elem).text();
					break;
				}
				
			}
			if(typeof cb == 'function'){
				cb(self._dataStore);
			}	
  		}
	});
}

module.exports = Android;